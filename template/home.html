{% extends 'base.html' %} 

{% load static %} 

{% block title %}
<title>Home</title>
{% endblock title%} 

{% block css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}" />
{% endblock css %} 

{% block js %}
<script src="{% static 'js/home.js' %}"></script>
{% endblock js %} {% block body %}
<div class="slider">
  <div class="slides">
    {% for i in slidesdata %}

    <div class="slide">
      <img src="{{i.img.url}}" alt="" />
    </div>
    {% endfor %}
  </div>

  <button class="nav-btn prev">&#10094;</button>
  <button class="nav-btn next">&#10095;</button>

  <div class="dots">
    <div class="dot active" data-index="0"></div>
    <div class="dot" data-index="1"></div>
    <div class="dot" data-index="2"></div>
    <div class="dot" data-index="3"></div>
    <div class="dot" data-index="4"></div>
    <div class="dot" data-index="5"></div>
    <div class="dot" data-index="6"></div>
    <div class="dot" data-index="7"></div>
  </div>
</div>

<h1 id="best">Best Selling mobiles</h1>
<div class="phone-container">
  <button class="arrow left" onclick="movePhones('left')">&#8592;</button>
  <div class="phone">
    {% for i in bestselling %}
    <a href="{% url 'myapp:mobiledata' i.id %}" style="text-decoration: none">
      <div class="inphone">
        <div class="phnimg">
          <img src="{{i.image.url}}" alt="phone Image" />
        </div>
        <div class="inphone1">
          <h3>{{i.name}}</h3>
          <span style="color: aquamarine; margin-top: 2vw">{{i.price}}</span><span>
            <strike class="discount" style="color: grey">{{i.origprice}}</strike></span>
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
  <button class="arrow right" onclick="movePhones('right')">&#8594;</button>
</div>


<h1 id="best" >Shop Mobiles by Brand</h1>
<div class="brand-container">
    {% for brand in brands %}
    <div class="brand" onclick="redirectToBrand('{{ brand.name|lower }}')">
        <img src="{{ brand.logo.url }}" alt="{{ brand.name }}">
        <!-- <div class="brand-name">{{ brand.name }}</div> -->
    </div>
    {% endfor %}
</div>

<div class="header">
  <h1>Hurry Up! Get Up to 30% Off</h1>
  <div class="timer">01 Days</div>
</div>
<div class="scroll-container">
  <button class="scroll-btn left" id="scrollLeft" onclick="moveProducts('left')">&#9664;</button>
  <div class="product-container" id="productContainer">
    <!-- Product Cards -->
    {% for i in moboff %}
    <!-- <a href="{% url 'myapp:mobiledata' i.id %}" style="text-decoration: none"> -->
    <div class="product-card">
      <div class="discount-badge">{{i.off}}% off</div>
      <img src="{{i.img.url}}" alt="Samsung A35">
      <div class="product-name">{{i.name}}</div>
      <div class="product-price">
        <span>₹ {{i.off_price}}</span> <span class="old-price">₹ {{i.old_price}}</span>
      </div>
      <button class="add-to-cart">+ Add to Cart</button>
    </div>
    <!-- </a> -->
    {% endfor %}
    <!-- Add more product cards as needed -->
  </div>
  <button class="scroll-btn right" id="scrollRight" onclick="moveProducts('right')">&#9654;</button>
</div>

<h1 id="best">Best Selling Laptops</h1>
<div class="phone-container">
  <button class="arrow left" onclick="movePhones('left')">&#8592;</button>
  <div class="phone">
    {% for i in bestlap %}
    <a href="{% url 'myapp:lapdata' i.id %}" style="text-decoration: none">
      <div class="inphone">
        <div class="phnimg">
          <img src="{{i.image.url}}" alt="phone Image" />
        </div>
        <div class="inphone1">
          <h3>{{i.name}}</h3>
          <span style="color: aquamarine; margin-top: 2vw">{{i.price}}</span><span>
            <strike class="discount" style="color: grey">{{i.origprice}}</strike></span>
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
  <button class="arrow right" onclick="movePhones('right')">&#8594;</button>
</div>


<h1 id="best">Shop Laptops by Brand</h1>
<div class="brand-container">
    {% for brand in lapbrands %}
    <div class="brand" onclick="redirectTolapBrand('{{ brand.name|lower }}')">
        <img src="{{ brand.logo.url }}" alt="{{ brand.name }}">
        <!-- <div class="brand-name">{{ brand.name }}</div> -->
    </div>
    {% endfor %}
</div>

<div class="header">
  <h1>Hurry Up! Get Up to 30% Off</h1>
  <div class="timer">01 Days</div>
</div>
<div class="scroll-container">
  <button class="scroll-btn left" id="scrollLeft" onclick="moveProducts('left')">&#9664;</button>
  <div class="product-container" id="productContainer">
    <!-- Product Cards -->
    {% for i in lapoff %}
    <div class="product-card">
      <div class="discount-badge"></div>
      <img src="{{i.image.url}}" alt="img">
      <div class="product-name">{{i.name}}</div>
      <div class="product-price">
        <span>₹ {{i.price}}</span> <span class="old-price">₹ {{i.origprice}}</span>
      </div>
      <button class="add-to-cart">+ Add to Cart</button>
    </div>
    {% endfor %}
    <!-- Add more product cards as needed -->
  </div>
  <button class="scroll-btn right" id="scrollRight" onclick="moveProducts('right')">&#9654;</button>
</div>

<div class="carousel-container">
    <div class="carousel-title">Newly Launched and Trending Accessories</div>

    <button class="scroll-button left-btn" onclick="moveProducts('left')">&#10094;</button>
    <div class="carousel-wrapper" id="carousel">
        {% for accessory in new_accessories %}
        <div class="carousel-item">
            <img src="{{ accessory.image.url }}" alt="{{ accessory.name }}">
            <p>{{ accessory.name }}</p>
            <p class="price">₹ {{ accessory.price }} 
                <span class="discount-price">₹ {{ accessory.orginalprice }}</span>
            </p>
        </div>
        {% empty %}
        <p>No newly launched accessories available.</p>
        {% endfor %}
    </div>
    <button class="scroll-button right-btn" onclick="moveProducts('right')">&#10095;</button>
</div>


<script>
  function redirectToBrand(brand) {
    window.location.href = `/mobiles/brand/${brand}/`;
}
function redirectTolapBrand(brand) {
  window.location.href = `/laptops/brand/${brand}/`;
}
  const slides = document.querySelector(".slides");
  const slide = document.querySelectorAll(".slide");
  const prevBtn = document.querySelector(".prev");
  const nextBtn = document.querySelector(".next");
  const dots = document.querySelectorAll(".dot");

  let currentIndex = 0;
  const slideCount = slide.length;

  // Clone first and last slides for seamless looping
  const firstClone = slide[0].cloneNode(true);
  const lastClone = slide[slideCount - 1].cloneNode(true);
  slides.appendChild(firstClone);
  slides.prepend(lastClone);

  const totalSlides = slideCount + 2; // Include clones
  slides.style.transform = `translateX(-${100}%)`;

  function updateSlider() {
    slides.style.transition = "transform 0.5s ease-in-out";
    slides.style.transform = `translateX(-${(currentIndex + 1) * 100}%)`;

    dots.forEach((dot, index) => {
      dot.classList.toggle("active", index === currentIndex);
    });
  }

  function jumpToRealSlide() {
    slides.style.transition = "none"; // Disable animation
    if (currentIndex === -1) {
      currentIndex = slideCount - 1;
      slides.style.transform = `translateX(-${currentIndex + 1}00%)`;
    } else if (currentIndex === slideCount) {
      currentIndex = 0;
      slides.style.transform = `translateX(-${(currentIndex + 1) * 100}%)`;
    }
  }

  // Next Button
  nextBtn.addEventListener("click", () => {
    currentIndex++;
    updateSlider();
    if (currentIndex === slideCount) {
      setTimeout(jumpToRealSlide, 500); // Delay for transition
    }
  });

  // Previous Button
  prevBtn.addEventListener("click", () => {
    currentIndex--;
    updateSlider();
    if (currentIndex === -1) {
      setTimeout(jumpToRealSlide, 500); // Delay for transition
    }
  });

  // Dots
  dots.forEach((dot) => {
    dot.addEventListener("click", () => {
      currentIndex = parseInt(dot.getAttribute("data-index"));
      updateSlider();
    });
  });

  // Auto Slide
  setInterval(() => {
    currentIndex++;
    updateSlider();
    if (currentIndex === slideCount) {
      setTimeout(jumpToRealSlide, 500); // Delay for transition
    }
  }, 5000);

  // newly_lanched
  function moveProducts(direction) {
    const container = document.querySelector('#carousel');
    const scrollAmount = 300; // Adjust as per required scroll step
    const offset = direction === 'left' ? -scrollAmount : scrollAmount;
    container.scrollBy({ left: offset, behavior: 'smooth' });
}

</script>

{% endblock body %}
